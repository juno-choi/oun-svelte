<script>
  // @ts-nocheck

  const routinePlaceholder = "ìš´ë™ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
  const routineBtnText = "-";
  const routineInputClass =
    "shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline mr-0";
  const routineBtnClass =
    "bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline";

  function routineRemove() {
    // idxê°€ 1ì¼ ê²½ìš° ì‚­ì œ ë¶ˆê°€
    const length = document
      .getElementById("routine-div")
      .querySelectorAll("input").length;
    if (length < 2) {
      alert("ë£¨í‹´ì„ ëª¨ë‘ ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
      return;
    }

    this.parentElement.remove();
  }

  function routineAdd() {
    const target = document.getElementById("routine-div");
    const div = document.createElement("div");
    div.setAttribute("class", "mb-4");

    const input = document.createElement("input");
    input.setAttribute("class", routineInputClass);
    input.setAttribute("type", "text");
    input.setAttribute("placeholder", routinePlaceholder);

    const button = document.createElement("button");
    button.setAttribute("class", routineBtnClass);
    button.setAttribute("type", "button");
    button.innerText = routineBtnText;
    button.addEventListener("click", routineRemove);

    div.appendChild(input);
    div.appendChild(button);
    target.appendChild(div);
  }

  function routineComplete() {
    const routineList = [];
    document
      .getElementById("routine-div")
      .querySelectorAll("input")
      .forEach((input) => {
        routineList.push(new RoutineObject(input.value));
      });
    routines.update((routine) => (routine = routineList));
  }
</script>

<div class="bg-white py-12">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center">
      <p
        class="text-3xl font-bold leading-8 tracking-tight text-gray-400 sm:text-4xl"
      >
        ğŸƒâ€â™‚ï¸ ìš´ë™ ë£¨í‹´ì„ ì§€ì •í•´ì£¼ì„¸ìš”.
      </p>
    </div>

    <div id="routine-div" class="text-center mt-10">
      <div class="mb-4">
        <input
          class={routineInputClass}
          type="text"
          placeholder={routinePlaceholder}
        />
        <button class={routineBtnClass} type="button" on:click={routineRemove}>
          {routineBtnText}
        </button>
      </div>
    </div>
    <div class="text-center mt-4">
      <div class="items-center">
        <button
          class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
          type="button"
          on:click={routineAdd}
        >
          + ë£¨í‹´ ì¶”ê°€
        </button>
      </div>
    </div>

    <div class="text-center mt-10">
      <a
        class="inline-block rounded-md border border-transparent bg-blue-500 py-3 px-8 text-center font-medium text-white hover:bg-blue-700"
        >ì´ì „</a
      >
      <a
        class="inline-block rounded-md border border-transparent bg-blue-500 py-3 px-8 text-center font-medium text-white hover:bg-blue-700"
        on:click={routineComplete}>ë‹¤ìŒ</a
      >
    </div>
  </div>
</div>
